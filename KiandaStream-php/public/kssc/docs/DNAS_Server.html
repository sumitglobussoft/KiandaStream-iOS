<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" dir="ltr" lang="en"><head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Nullsoft SHOUTcast DNAS Server v2.2</title>
	<style type="text/css">body,table,textarea,pre{font-family:Arial,Helvetica,sans-serif;font-size:10pt;}
	a:link,a:visited{color:#2762AE;text-decoration:none;}
	a:hover{text-decoration:underline;}
	ul{list-style-type:none;text-align:left;}
	ul.n{list-style-type:square;text-align:left;}
	pre{background-color:#F0F0F0;border:1px solid #CCCCCC;font-weight:bold;padding:5px 10px 5px 10px;display:inline-block;margin-top:0;margin-bottom:0;margin-left:25px;}
	pre.src{border:0;font-family:monospace;background-color:white;}
	span.b{font-weight:normal;color:#3366CC;}
	span.c{font-style:italic;font-weight:normal;color:#808080;}
	span.v{font-weight:normal;}
	span.r{font-weight:normal;color:#000066;}
	span.s{font-weight:normal;color:#FF0000;}
	#toc {background-color:#F0F0F0;border:1px solid #CCCCCC;padding:0 5px 0 5px;text-align: center;}
	p.ver{color:#4C4C4C;font-size:85%;margin-top:-1.5em;text-align:center;}
	.thumb{float:right;clear:both;margin-left:10px;margin-top:5px;margin-bottom:10px;width:202px;}
	.serv{float:right;clear:both;margin-left:10px;margin-top:5px;margin-bottom:10px;width:252px;}
	.pages{white-space:nowrap;padding-right:25px;}
	img{width:200px;}
	img.serv{width:250px;}
	img.thumb{border:1px solid #CCCCCC;}
	hr{border:0;background-color:#CCCCCC;height:1px;)</style>
	<script type="text/javascript">if(window.showTocToggle){var tocShowText="show";var tocHideText="hide";showTocToggle()}function showTocToggle(){if(document.createTextNode){var linkHolder=document.getElementById('toctitle');if(!linkHolder){return}var outerSpan=document.createElement('span');outerSpan.className='toctoggle';var toggleLink=document.createElement('a');toggleLink.id='togglelink';toggleLink.className='internal';toggleLink.href='javascript:toggleToc()';toggleLink.appendChild(document.createTextNode(tocHideText));outerSpan.appendChild(document.createTextNode('['));outerSpan.appendChild(toggleLink);outerSpan.appendChild(document.createTextNode(']'));linkHolder.appendChild(document.createTextNode(' '));linkHolder.appendChild(outerSpan);var cookiePos=document.cookie.indexOf("serv_hidetoc=");if(cookiePos>-1&&document.cookie.charAt(cookiePos+13)==1){toggleToc()}}}function changeText(el,newText){if(el.innerText){el.innerText=newText}else if(el.firstChild&&el.firstChild.nodeValue){el.firstChild.nodeValue=newText}}function toggleToc(){var toc=document.getElementById('toc').getElementsByTagName('ul')[0];var first=document.getElementById('first');var toggleLink=document.getElementById('togglelink');if(toc&&toggleLink&&toc.style.display=='none'){changeText(toggleLink,tocHideText);document.getElementById('toc').style.cssFloat='left';toc.style.display='block';first.style.marginLeft='315px';document.cookie="serv_hidetoc=0"}else{changeText(toggleLink,tocShowText);document.getElementById('toc').style.cssFloat='';toc.style.display='none';first.style.marginLeft='';document.cookie="serv_hidetoc=1"}}window.onload=function(){var cookiePos=document.cookie.indexOf("serv_hidetoc=");if(cookiePos>-1&&document.cookie.charAt(cookiePos+13)==1){toggleToc()}}</script>
</head>
<h1 align="center">Nullsoft SHOUTcast DNAS Server v2.2</h1>
<p class="ver">(Last Updated 29 November 2013)</p>
<hr>
<table id="toc" style="float:left;margin-right:40px;margin-bottom:5px;"><tbody><tr><td>
<div id="toctitle"><b>Contents</b> <span class="toctoggle">[<a id="togglelink" class="internal" href="javascript:toggleToc()">hide</a>]</span></div>
<ul style="padding-left:0px;">
<li><a href="#Introduction">1 Introduction</a></li>
<li><a href="#Overview">2 Overview</a></li>
<li><a href="#Getting_Started">3 Getting Started</a></li>
<ul>
<li><a href="#Running_the_Server">3.1 Running the Server</a></li>
<li><a href="#Windows">3.2 Windows</a></li>
<ul>
<li><a href="#Install_as_a_Service">3.2.1 Install as a Service</a></li>
<li><a href="#Uninstall_the_Service">3.2.2 Uninstall the Service</a></li>
<li><a href="#Run_in_the_Console">3.2.3 Run in the Console</a></li>
</ul>
<li><a href="#Linux_/_Mac_OS_X_/_BSD">3.3 Linux / Raspbian</a></li>
<ul>
<li><a href="#Run_as_a_Daemon">3.3.1 Run as a Daemon</a></li>
<li><a href="#End_a_Daemon">3.3.2 End a Daemon</a></li>
<li><a href="#Run_as_a_Non-Daemon">3.3.3 Run as a Non-Daemon</a></li>
</ul>
<li><a href="#Run_in_Setup_or_Configuration_Builder_Mode">3.4 Run in Setup or Configuration Builder Mode</a></li>
<li><a href="#Additional_Signals">3.5 Additional Signals</a></li>
</ul>
<li><a href="#Configuration_File">4 Configuration File</a></li>
<ul>
<li><a href="#Banning">4.1 Banning</a></li>
<li><a href="#Client_Behaviour">4.2 Client Behaviour</a></li>
<li><a href="#Debugging">4.3 Debugging</a></li>
<li><a href="#Flash_Policy_Server">4.4 Flash Policy Server</a></li>
<li><a href="#Introduction_and_Backup_Files">4.5 Introduction and Backup Files</a></li>
<li><a href="#Logging">4.6 Logging</a></li>
<li><a href="#Miscellaneous">4.7 Miscellaneous</a></li>
<li><a href="#Networking">4.8 Networking</a></li>
<li><a href="#Network_Buffers">4.9 Network Buffers</a></li>
<li><a href="#Relaying">4.10 Relaying</a></li>
<li><a href="#Reserved_List">4.11 Reserved List</a></li>
<li><a href="#Stream_Configuration">4.12 Stream Configuration</a></li>
<li><a href="#Web_Connection_(W3C)_Logging">4.13 Web Connection (W3C) Logging</a></li>
<li><a href="#YP_Server_Behaviour">4.14 YP Server Behaviour</a></li>
<li><a href="#YP_Server_Errors">4.15 YP Server Errors</a></li>
<li><a href="#Statistics">4.16 Statistics</a></li>
</ul>

<li><a href="#Administration">5 Administration</a></li>
<ul>
<li><a href="#Administration_Pages">5.1 Administration Pages</a></li>
<ul>
<li><a href="#Public_Pages">5.1.1 Public Pages</a></li>
<li><a href="#Private_Pages">5.1.2 Private Pages</a></li>
</ul>
<li><a href="#XML_/_JSON_/_JSON-P_Responses">5.2 XML / JSON / JSON-P Responses</a></li>
</ul>
<li><a href="#Stream_Addresses">6 Stream Addresses</a></li>
<ul>
<li><a href="#HTTP_Protocol_Compatibility">6.1 HTTP Protocol Compatibility</a></li>
</ul>
<li><a href="#Maximum_Client_Connection_Limits">7 Maximum Client Connection Limits</a></li>
<li><a href="#Example_Configurations">8 Example Configurations</a></li>
<ul>
<li><a href="#sc_serv_basic">8.1 sc_serv_basic</a></li>
<li><a href="#sc_serv_public">8.2 sc_serv_public</a></li>
<li><a href="#sc_serv_relay">8.3 sc_serv_relay</a></li>
<li><a href="#sc_serv_debug">8.4 sc_serv_debug</a></li>
<li><a href="#sc_serv_simple">8.5 sc_serv_simple</a></li>
</ul>
</ul>
</td></tr></tbody></table>

<a name="Introduction"></a><h2>1.&nbsp;Introduction</h2>
<hr>
<p>The purpose of this document is to show you the different configuration options supported by the DNAS server (sc_serv) along with basic and more advanced example configurations to get started with using the DNAS server and the many features it can offer.</p>
<p><br>The aim of the DNAS server is to provide enhanced serving features and also access to the new YP2 infrastructure whilst maintaining as much backward compatibility with previous versions of DNAS server as possible. The new features introduced include:</p>
<ul class="n" id="first" style="margin-left:315px;"><li>Serving multiple streams from a single server instance</li>
<li>Relaying multiple streams from a single server instance</li>
<li>Multiplexing all server activity through a single IP port</li>
<li>SHOUTcast 2 wire protocol support for sources, relays and clients</li>
<li>Repackaging of SHOUTcast v1 and SHOUTcast v2 stream data as needed for clients</li>
<li>v2 SHOUTcast Directory (YP2) infrastructure support</li>
<li>Real-time metadata and statistic reporting</li>
<li>Static station id support</li>
<li>Expanded in-stream metadata support including sending of artwork</li>
<li>UTF-8 and international character encoding</li>
<li>Improved server and stream security</li>
<li>Improved server support for using DNS addresses instead of raw IP</li>
<li>Backup url support to keep streams active when the main source fails</li>
</ul>
<p><br></p>

<a name="Overview"></a><h2>2.&nbsp;Overview <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>To take full advantage of the features provided by the v2 DNAS server, it is recommended to use a v2 compatible source which can provide the required data.<br><br>This does not prevent you from using a v1 compatible source though you will not get the benefit of all of the additional platform features.</p>
<p>You are currently limited to only one directly connected v1 source per DNAS server (you can use multiple v1 based relays) and the stream identifier is always #1 (this mimics the v1 DNAS server behaviour as the v1 protocol has no handling of multiple stream sources from a single port).</p>
<p>If you are planning on connecting multiple Transcoder (sc_trans) instances to the DNAS server then you must use the v2 protocol support so that each Transcoder instance has a unique stream identifier which allows for multiple streams to then be provided from the single DNAS server instance.</p>
<br><pre>As long as a client is 'SHOUTCast compatible' then the
DNAS server will repackages the stream data and any
metadata into the v1 or v2 stream format as applicable.</pre>
<p><br></p>

<a name="Getting_Started"></a><h2>3.&nbsp;Getting Started <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>A key aspects of the v2 SHOUTcast Directory infrastructure (as used by the v2 DNAS server) is an authhash which is used to validate your DNAS server when it connects to the SHOUTcast Directory for any of the station(s) you run. Once an authhash has been obtained for a stream then it will be valid for all DNAS servers of the station being broadcast which make use of it.</p>
<br><pre>Important: An authhash is not something you are charged for and are free to be created.</pre>
<p><br>Details on how to create and manage authhash(s) for your streams as well as additional information can be found <a href="DNAS_Server_Authhash_Management.html"><b>here</b></a> via the '<b>Server Summary</b>' page as long as a valid source has been connected to the server. This will automatically update the configuration file(s) with the new authhash and if the stream is set to be public then will attempt to get the stream listed in the SHOUTcast Radio Directory.</p>
<p><br></p>

<a name="Running_the_Server"></a><h2>3.1.&nbsp;Running the Server <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<div class="serv"><a href="res/Example_Windows_Console.png" title="Example of the Windows DNAS server running"><img class="serv" alt="Example of the Windows DNAS server running" src="res/Example_Windows_Console.png"></a></div>
<p>The DNAS server is able to be run either as a console application or it can be run as service (Windows) or daemon (Linux / Raspbian). The following sections below detail how to get the DNAS server running on the different operating systems supported by it.</p>
<p><br></p>

<a name="Windows"></a><h2>3.2.&nbsp;Windows <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>The Windows version of the DNAS server is designed to run on fully updated and patched versions of Windows 2000, XP, Vista, Windows 7 and Windows 8.x.</p>
<p>Please note that the Windows versions of DNAS server are built with a dependency against the Microsoft Visual C++ 2008 SP1 Redistributable Package. If the DNAS server is unable to start due to a dependency issue then you will need to install the correct version of the package so it can run which depends on the version of DNAS server you are attempting to run:</p>
<p><b>32-bit version:</b> <a href="http://www.microsoft.com/en-us/download/details.aspx?id=5582">http://www.microsoft.com/en-us/download/details.aspx?id=5582</a></p>
<p><b>64-bit version:</b> <a href="http://www.microsoft.com/en-us/download/details.aspx?id=2092">http://www.microsoft.com/en-us/download/details.aspx?id=2092</a></p>
<p><br></p>

<a name="Install_as_a_Service"></a><h2>3.2.1.&nbsp;Install as a Service <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>sc_serv.exe install <servicename> [username] [password] [conf]</p>
<div class="serv"><a href="res/Windows_Service_Install_Failure.png" title="Example Error Registering as a Service"><img class="serv" alt="Example Error Registering as a Service" src="res/Windows_Service_Install_Failure.png"></a></div>
<p><b>&lt;servicename&gt;</b> - Name of service</p>
<pre>Typically enter this as 'sc_serv' though you can use a different name but you need to
remember it as it is required to be the same when using the 'uninstall' service mode.
If &lt;servicename&gt; is already used by an existing registered service then this will fail.</pre>
<p><b>username</b> - User under which to run the service as or '0' for the local system  [optional]</p>
<p><b>username</b> - Password for user or '0' for the local system or with no password  [optional]</p>
<p><b>conf</b> - File path to the configuration file  [optional]</p>
<pre>If no file / an invalid file is specified then DNAS server will abort loading
once it has looked for sc_serv.ini or sc_serv.conf in the same folder as
sc_serv.exe (using sc_serv.ini first and then sc_serv.conf as applicable).</pre>
<p><br>To run the DNAS server with a configuration file in the same folder as the server as the current local system user you would enter into the console:</p>
<p style="padding-left:25px;"><b>sc_serv.exe install sc_serv</b>
<br>or<br>
<b>sc_serv.exe install sc_serv 0 0 sc_serv.conf</b></p>
<p><br></p>

<a name="Uninstall_the_Service"></a><h2>3.2.2.&nbsp;Uninstall the Service <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>sc_serv.exe uninstall &lt;servicename&gt;</p>
<p><b>&lt;servicename&gt;</b> - Name of service</p>
<p><br>To uninstall the DNAS server assuming it was installed as detailed in the install section above then you would enter into the console:</p>
<p style="padding-left:25px;"><b>sc_serv.exe uninstall sc_serv</b></p>
<p><br></p>

<a name="Run_in_the_Console"></a><h2>3.2.3.&nbsp;Run in the Console <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<div class="serv"><a href="res/Windows_Console.png" title="Prompt for Configuration File"><img class="serv" alt="Prompt for Configuration File" src="res/Windows_Console.png"></a></div>
<p>sc_serv.exe [conf]</p>
<p><b>conf</b> - File path to the configuration file (can be relative or absolute)  [optional]</p>
<pre>If no file / an invalid file is specified then the DNAS server will abort loading
once it has looked for sc_serv.ini or sc_serv.conf in the same folder as
sc_serv.exe (using sc_serv.ini first and then sc_serv.conf as applicable). If a
default configuration file (sc_serv.conf or sc_serv.ini) is not found then you
will be shown a prompt for the configuration file to choose from.</pre>
<p><br></p>

<a name="Linux_/_Mac_OS_X_/_BSD"></a><h2>3.3.&nbsp;Linux / Raspbian <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<div class="serv"><a href="res/Example_Linux_Console.png" title="Example of the Linux DNAS Server Running"><img class="serv" alt="Example of the Linux DNAS Server Running" src="res/Example_Linux_Console.png"></a></div>
<p>Remember to enable the required access on the sc_trans file by doing '<b>chmod a+x sc_serv</b>' after extracting it from the distribution file otherwise the OS is likely to not run it and will instead show the error message '<b>./sc_serv: Permission denied</b>'.</p>
<p><br></p>

<a name="Run_as_a_Daemon"></a><h2>3.3.1.&nbsp;Run as a Daemon <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>./sc_serv daemon [conf]</p>
<p><b>conf</b> - File path to the configuration file  [optional]</p>
<pre>If no file / an invalid file is specified then DNAS server will abort loading
once it has looked for sc_serv.ini or sc_serv.conf in the same folder as
sc_serv (using sc_serv.ini first and then sc_serv.conf as applicable).</pre>
<p><br>e.g.</p>
<p style="padding-left:25px;"><b>./sc_serv daemon</b>
<br>or<br>
<b>./sc_serv daemon ./sc_serv.conf</b></p>
<div class="serv"><a href="res/Linux_Daemon_Mode.png" title="Example of the Linux DNAS Server Started as a Daemon"><img class="serv" alt="Example of the Linux DNAS Server Started as a Daemon" src="res/Linux_Daemon_Mode.png"></a></div>
<p><br>When run this should output the following:</p>
<p>'sc_serv going daemon with PID [XXXX]' where XXXX is the &lt;pid&gt; of the process.</p>
<p><br></p>

<a name="End_a_Daemon"></a><h2>3.3.2.&nbsp;End a Daemon <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>kill -SIGTERM &lt;pid&gt;<br>
or<br>
kill -15 &lt;pid&gt;<br>
or<br>
kill -s TERM &lt;pid&gt;</p>
<p><b>&lt;pid&gt;</b> - The PID of the daemon instance (reported when the daemon started or can be found
        with '<b>ps ax | grep sc_serv</b>' as long as sc_serv was the file run otherwise you can
        just use 'ps ax' if the filename isn't known). Additionally the PID of the DNAS
        server is listed in the log file or shown in the console when run as a daemon.</p>
<p><br></p>

<a name="Run_as_a_Non-Daemon"></a><h2>3.3.3.&nbsp;Run as a Non-Daemon <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<div class="serv"><a href="res/Linux_Console.png" title="Prompt for Configuration File"><img class="serv" alt="Prompt for Configuration File" src="res/Linux_Console.png"></a></div>
<p>./sc_serv [conf]</p>
<p><b>conf</b> - File path to the configuration file (can be relative or absolute)  [optional]</p>
<pre>If no file / an invalid file is specified then the DNAS server will abort loading
once it has looked for sc_serv.ini or sc_serv.conf in the same folder as
sc_serv (using sc_serv.ini first and then sc_serv.conf as applicable). If a
default configuration file (sc_serv.conf or sc_serv.ini) is not found then you
will be shown a prompt for the configuration file to choose from.</pre>
<p><br></p>

<a name="Run_in_Setup_or_Configuration_Builder_Mode"></a><h2>3.4.&nbsp;Run in Setup or Configuration Builder Mode <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>To make it easier to setup the DNAS server for broadcasting, two helper modes are provided which aim to make it easier to create the configuration file(s) needed for the server to run.</p>
<div class="serv"><a href="res/Console_Setup_Mode.png" title="Setup Mode Running"><img class="serv" alt="Setup Mode Running" src="res/Console_Setup_Mode.png"></a></div>
<p><br><b>Setup mode</b> is specifically for setting up common options needed for the DNAS to run.</p>
<p>This mode is run by choosing <b>setup.bat</b> (Windows) or <b>./setup.sh</b> (non-Window) found in the same folder as sc_serv[.exe].</p>
<br><div class="serv"><a href="res/Console_Builder_Mode.png" title="Builder Mode Running"><img class="serv" alt="Builder Mode Running" src="res/Console_Builder_Mode.png"></a></div>
<p><b>Configuration Builder mode</b> is used for hosting the configuration builder without the need for remote hosting of the configuration builder files or having to change browser security settings. The configuration builder is able to generate more complex configurations targetted at combined DNAS server and Transcoder configurations though it can just be used to create a configuration file for the DNAS server.</p>
<p>This mode is run by choosing <b>builder.bat</b> (Windows) or <b>./builder.sh</b> (non-Window) found in the same folder as sc_serv[.exe].</p>
<div class="serv"><a href="res/Setup_Mode_Error.png" title="Setup Mode Error Loading"><img class="serv" alt="Builder Mode Running" src="res/Setup_Mode_Error.png"></a></div>
<br><pre>For either of these modes to work, you need to have the 'setup' and 'builder'
folder present in the folder where sc_serv[.exe] was installed into it. If this is
not the case then you will see an error message like the one to the right.</pre>
<p><br></p>

<a name="Additional_Signals"></a><h2>3.5.&nbsp;Additional Signals <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>When run on Linux / Raspbian then some additional signals are supported to allow for additional control over the running daemon instance of the DNAS server.</p>
<p>The following signals can be used with the 'kill' command (in the manner of your choosing for using the kill command) along with the <pid> of the daemon instance to do one of the following actions:</p>
<p>
<table style="padding-left:25px;"><tr><td style="padding-right:25px;"><b>SIGKILL</b></td><td>Stops the DNAS server (also SIGTERM, SIGINT and SIGQUIT will work)</td></tr>
<tr><td><b>SIGHUP</b></td><td>Rotates logfile, w3clog and streamw3clog</td></tr>
<tr><td><b>SIGWINCH</b></td><td>Reload the reserved list file(s)</td></tr>
<tr><td><b>SIGUSR1</b></td><td>Reload server configuration file</td></tr>
<tr><td><b>SIGUSR2</b></td><td>Reload server configuration file (forced)</td></tr></table></p>
<p><br>The result of SIGHUP is that the current log file contents will be moved into &lt;logfile&gt;_1 e.g. <b>sc_serv_1.log</b>, &lt;logfile&gt;_1 will be moved into &lt;logfile&gt;_2 e.g. <b>sc_serv_2.log</b> and so on for all log files which can be found which match the current log file's name. This is useful if timed to have it create day specific log files. When &lt;logfile&gt;_5 is reached, the current one will be placed into a GZIP encoded archive named in the format of <b>&lt;logfile&gt;_log_&lt;date&gt;_&lt;time&gt;.gz</b> where date and time are when the archive is created.</p>
<br><pre>These signals are not supported by the Windows version of DNAS server which will
only respond to the Ctrl+C / Ctrl+Break / console close commands the OS provides.</pre>
<p><br></p>

<a name="Configuration_File"></a><h2>4.&nbsp;Configuration File <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>Here you can find a complete list of all of the configuration options which are provided by DNAS server which ranges from logging to networking configuration and control over the media being used when streaming via the server.</p>
<pre>The configuration files are text files and can be edited in any text editor.</pre>
<p><br>Configuration entries labelled as <b>&lt;MULTI&gt;</b> can be used to set up simultaneous connections to the server or allow for multiple connections from various sources. These are specified by adding <b>_#</b> to the end of the option's name as shown below where <b>#</b> begins with one. If you are only working with a single instance then you do not need to add the <b>_#</b> part as any instances of a configuration option will assume it is for <b>_1</b>.</p>
<br><pre>The &lt;MULTI&gt; system is not hierarchical and all values
beyond the default must be specified for all connections.</pre>
<p style="margin-bottom:0px;"><br>For example, if you wanted stream specific client limits on 2 streams you must do:</p>
<p style="padding-left:25px;margin-top:0px;">
maxuser=128<br>
streammaxuser_1=32<br>
streammaxuser_2=32</p>
<p style="margin-bottom:0px;">Note that you CANNOT do it like this as it leads to stream 2 following maxuser:</p>
<p style="padding-left:25px;margin-top:0px;">
maxuser=128<br>
streammaxuser=32</p>
<p><br>The configuration files also allow for notes or options to be disabled by the use of a comma (<b>;</b>) at the start of a line which can be seen in all of the configuration examples. Known options in the configuration files are recognised irrespective of the case they are entered in the configuration file so <b>maxuser</b> and <b>MaXuSer</b> will be handled the same way.</p>
<p><br>Any items found in the configuration file which are not known (as detailed in following sections) or is not processed as a comment will be reported in the following manner:</p>
<div class="thumb"><a href="res/Invalid_Configuration_Item.png" title="Builder Mode Running"><img class="thumb" alt="Builder Mode Running" src="res/Invalid_Configuration_Item.png"></a></div>
<p style="padding-left:25px;"><b>&lt;date + time&gt;&nbsp;&nbsp;&nbsp;&nbsp;WARN&nbsp;&nbsp;&nbsp;&nbsp;[CONFIG] Invalid item on line XX of &lt;conf&gt; -> `&lt;option&gt;'</b>
<br><br>
<i>&lt;date + time&gt;</i> is the date and time the event happens<br>
<i>XX</i> is the line in the file &lt;conf&gt; with the error is<br>
<i>&lt;option&gt;</i> is the name of the invalid item found</p>
<p><br>A properly configured DNAS server should not report any configuration warnings and most are going to be from typos or options which have been deprecated or renamed (which if so then should be resolved with the suggested name configuration option).
<p><br></p>

<a name="Banning"></a><h2>4.1.&nbsp;Banning <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p><b>banfile</b> : File to store the list of banned addresses <i>[Default = sc_serv.ban]</i></p>
<p><b>savebanlistonexit</b> : Write any changes to the 'banfile' when required <i>[Default = 1]</i></p>
<pre>If you are using a folder for saving the file into then you need to ensure that the
folder already exists as the DNAS server will not attempt to the create the folder.</pre>
<p><br></p>

<a name="Client_Behaviour"></a><h2>4.2.&nbsp;Client_Behaviour <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p><b>maxuser</b> : Specify the maximum number of clients allowed to connect to the server <i>[Default = 32]</i></p>
<pre>This is used in conjunction with 'streammaxuser' (see <a href="#Stream_Configuration">section 4.12</a>) to control the
limit on the number of client connections allowed to connect to the server instance.</pre>
<p><b>listenertime</b> : Specify the maximum time in minutes a client can listen to the stream <i>[Default = 0]</i></p>
<pre>A value of zero means there will be no time limit.</pre>
<p><b>autodumpusers</b> : Enable to allow the server to disconnect clients if the source disconnects <i>[Default = 0]</i></p>
<p><br><b>srcip</b> : Specify the server side binding address for sources to connect on <i>[Default = &lt;no&nbsp;value&gt;]</i></p>
<p><b>destip</b> : Specify the server side binding address for clients <i>[Default = &lt;no&nbsp;value&gt;]</i></p>
<p style="magin-bottom:0px;"><u>Notes:</u></p>
<p style="padding-left:25px;magin-top:0px;">If '<b>any</b>' or no value is specified then DNAS server listens to all addresses.<br><br>
If you specify a value for '<b>destip</b>' then this will be used by the listen feature on the Administration Pages (see <a href="#Administration_Pages">section 5.1</a>) so it can provide a valid stream url in the generated playlist. If '<b>destip</b>' is not specified then the server will attempt to auto-generate the address required for the client to be able to connect.<br><br>
The address provided needs to be in a valid format like http://<my-ip> or as an address which can be resolved to a valid IP address otherwise the internal lookups done will fail (depends upon the server configuration and OS being used).<br><br>
You cannot set '<b>srcip</b>' and '<b>destip</b>' to be the same address and if this happens then the server will close due to a binding error. The server also stops if the address cannot be resolved or correctly bound to i.e. due to another instance is already running.</p>
<p><br><b>titleformat</b> : Specify a string to be used in-place of the default icy-name string being used <i>[Default = &lt;no&nbsp;value&gt;]</i></p>
<p><b>urlformat</b> : Specify a string to be used in-place of the default icy-url string being used <i>[Default = &lt;no&nbsp;value&gt;]</i></p>
<p><br></p>

<a name="Debugging"></a><h2>4.3.&nbsp;Debugging <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>In all cases, the default value is for no debug logging for the options listed below.</p>
<p><b>yp2debug</b> : Enable debug logging of YP2 connections</i></p>
<p><b>shoutcastsourcedebug</b> : Enable debug logging of SHOUTcast source connections</i></p>
<p><b>uvox2sourcedebug</b> : Enable debug logging of SHOUTcast 2 source connections</i></p>
<p><b>shoutcast1clientdebug</b> : Enable debug logging of SHOUTcast streaming clients</i></p>
<p><b>shoutcast2clientdebug</b> : Enable debug logging of SHOUTcast 2 streaming clients</i></p>
<p><b>relayshoutcastdebug</b> : Enable debug logging for SHOUTcast relays</i></p>
<p><b>relayuvoxdebug</b> : Enable debug logging for SHOUTcast 2 relays</i></p>
<p><b>relaydebug</b> : Enable debug logging of common relay code</i></p>
<p><b>streamdatadebug</b> : Enable debug logging of common streaming code</i></p>
<p><b>httpstyledebug</b> : Enable debug logging of http style requests</i></p>
<p><b>statsdebug</b> : Enable debug logging of statistics</i></p>
<p><b>microserverdebug</b> : Enable debug logging of common server activity</i></p>
<p><b>threadrunnerdebug</b> : Enable debug logging of the thread manager</i></p>
<p><b>rtmpclientdebug</b> : Enable debug logging of rtmp clients</i></p>
<p><b>flashpolicyserverdebug</b> : Enable debug logging for the flash policy server</i></p>
<p><b>webclientdebug</b> : Enable debug logging of web client connections</p>
<p><br></p>

<a name="Flash_Policy_Server"></a><h2>4.4.&nbsp;Flash Policy Server <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>These options allow for control over the Flash Policy Server requests which can be made to the server which improves the interoperability of the server with Flash players.</p>
<p><b>flashpolicyfile</b> : Name of file containing flash crossdomain policies for the server if the defaults are not appropriate <i>[Default = crossdomain.xml]</i></p>
<p style="magin-bottom:0px;"><u>Notes:</u></p>
<p style="padding-left:25px;magin-top:0px;">The default behaviour is to return a reponse indicating that access to the server from any domain to only configured ports is allowed (which varies dependig on how 'portbase' and 'portlegacy' have been setup):</p>
<pre class="src">&lt;?xml <span class="r">version=</span><span class="s">"1.0"</span>?&gt;
  &lt;!DOCTYPE cross-domain-policy SYSTEM "http://www.adobe.com/xml/dtds/cross-domain-policy.dtd"&gt;
    &lt;cross-domain-policy&gt;
      &lt;<span class="r">allow-access-from domain=</span><span class="s">"*"</span> <span class="r">to-ports=</span><span class="s">"portbase,portbase+1"</span>/&gt;
      &lt;!-- or --&gt;
      &lt;<span class="r">allow-access-from domain=</span><span class="s">"*"</span> <span class="r">to-ports=</span><span class="s">"portbase,portlegacy"</span>/&gt;
      &lt;!-- or --&gt;
      &lt;<span class="r">allow-access-from domain=</span><span class="s">"*"</span> <span class="r">to-ports=</span><span class="s">"portbase"</span>/&gt;
    &lt;/cross-domain-policy&gt;</pre>
<p><b>flashpolicyserverport</b> : Enable to allow handling of flash policy server requests made on the specified port to return 'flashpolicyfile' <i>[Default = 0]</i></p>
<pre>Flash policy server requests are usually attempted first on port
843 before trying the server port (as specified by 'portbase').
If that does not work then an attempt will be made to connect
directly to /crossdomain.xml to determine the access allowed.</pre>
<p><br></p>

<a name="Introduction_and_Backup_Files"></a><h2>4.5.&nbsp;Introduction and Backup Files <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p style="magin-bottom:0px;"><u>Important Notes:</u></p>
<p style="padding-left:25px;magin-top:0px;">When using the intro file option, if a client connects via the current SHOUTcast site Flash player (or likely other Flash players), they will hear the contents of the intro but will then experience stuttering of the playback. This is an issue with how playback of SHOUTcast streams in Flash is generally implemented and should not affect standalone clients.<br><br>
The intro and backup files need to be in the same format (MP3 / AAC), bitrate and sample rate as the stream(s) being provided. Not doing this will lead to the stream afterwards playing at the wrong speed or it not playing at all.<br><br>
Additionally the files will have any ID3v1.x, ID3v2.x, Lyrics3 and Apev2 tags removed from the file to attempt to improve client compatibility.</p>
<p><br><b>introfile</b> : File to play when a client first connects to the server <i>[Default = &lt;no&nbsp;value&gt;]</i></p>
<p><b>backupfile</b> : File to play when a client first connects to the server <i>[Default = &lt;no&nbsp;value&gt;]</i></p>
<p><b>maxspecialfilesize</b> : Change the maximum size in bytes of the backup and intro files <i>[Default = 30000000]</i></p>
<p><br></p>

<a name="Logging"></a><h2>4.6.&nbsp;Logging <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p><b>log</b> : Enable logging of the servers output <i>[Default = 1]</i></p>
<p><b>screenlog</b> : Enable logging of servers output to the console <i>[Default = 1]</i></p>
<pre>If log=0 or when running this as a daemon / service
then this option will be ignored as it is not applicable.<br><br>
The output is colored to make it easier to see issues in the output.
Errors are <font color="red">red</font>, warnings <font color="FACC2E">yellow / orange</font> and debugging <font color="green">green</font>.</pre>
<p><br><b>logfile</b> : Specify a different logfile to save the logs into <i>[Default = %temp%\sc_serv.log or /tmp/sc_serv.log]</i></p>
<p><b>logrotates</b> : Specify the number of backups made when the log is rotated <i>[Default = 5]</i></p>
<p><b>logarchive</b> : Enable storing of rotated log files which would otherwise be deleted once the number of rotates has been reached into a GZIP encoded archive <i>[Default = 0]</i></p>
<p><b>logclients</b> : Enable logging of details about client connections and disconnections made <i>[Default = 1]</i></p>
<pre>If you are using a folder for saving the logs into then you need to ensure the
folder already exists as the DNAS server will not create the folder for you.</pre>
<p><br></p>

<a name="Miscellaneous"></a><h2>4.7.&nbsp;Miscellaneous <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p><b>configrewrite</b> : Re-write the 'config file' on server exit <i>[Default = 0]</i></p>
<p style="margin-bottom:0px;">This can accept the following values:</p>
<p style="padding-left:25px;margin-top:0px;"><br><b>0</b>&nbsp;&nbsp;&rarr;&nbsp;&nbsp;do not re-write the configuration file<br>
<b>1</b>&nbsp;&nbsp;&rarr;&nbsp;&nbsp;only save options which are different from the default value<br>
<b>2</b>&nbsp;&nbsp;&rarr;&nbsp;&nbsp;full save even if the value is the same as the default value (this used to the behaviour when set to 1)</p>
<p><br><b>cpucount</b> : Specify the number of cpu's present instead of the calculated number if non-zero <i>[Default = 0]</i></p>
<p><br><b>unique</b> : Specify a substitution string for the '<b>$</b>' character to be used when processing filenames which if specified will set any occurences of '<b>$</b>' to the value set. This will be used in the processing of the following filenames:</p>
<p style="padding-left:25px;">logfile, introfile, streamintrofile, backupfile, streambackupfile, banfile, streambanfile, ripfile, streamripfile, include, w3clog, streamw3clog</p>
<p>So when 'unique' is changed from '$' to say 'test' then the following happens if 'logfile' is set to '/usr/local/shoutcast/$.log' then this would be converted to '/usr/local/shoutcast/test.log'</p>
<p><br><b>include</b> : Specify an additional include file containing settings to be processed from the current point in the main configuration file <i>[Default = &lt;no&nbsp;value&gt;]</i></p>
<p style="magin-bottom:0px;"><u>Notes:</u></p>
<p style="padding-left:25px;magin-top:0px;">You can do multiple calls of this allowing for a basic configuration file with then 'specific' stream configurations set in individual conf files though you need to ensure not to include a reference to the same file in itself.<br><br>
You can also specify a path with a wildcard for the DNAS server to use to find multiple configuration files to include e.g. '<b>include=streams/*.conf</b>'. This can then be used along with the multiple stream configurations (see <a href="#Stream_Configuration">section 4.12</a>) and the admin command '<b>admin.cgi?mode=reload</b>' (see <a href="#Administration_Pages">section 5.1.2</a>) to add or remove or update stream configurations without having to close the server to apply them.</p>
<p><br><b>admincssfile</b> : Specify the css styling to be used on the index.html and admin pages <i>[Default = v2]</i></p>
<p style="magin-bottom:0px;">This can accept the following parameters:</p>
<p style="padding-left:25px;magin-top:0px;">admincssfile=v1  -  Uses the v1 DNAS style<br>
admincssfile=v2  -  Uses the newer SHOUTcast 2 style (default)<br>
admincssfile=path_to_local_css_file  e.g. my_index.css</p>
<pre>If using a custom css file, if it does not exist on the first try to load it, the server
will revert to the default css style. As well the style is cached once loaded so
changes require a clearing of the cache via '<b>admin.cgi?mode=clearcache</b>'
(see <a href="#Administration_Pages">section 5.1.2</a>).</pre>
<p><br><b>faviconfile</b> : Specify the file to be returned as the favicon.ico when the administration pages are being queried by the client's browser <i>[Default = &lt;no&nbsp;value&gt;]</i></p>
<p>The default behaviour is to use a SHOUTcast themed built-in icon file and support / handling the update of this will entirely depend on the browser.</p>
<p><br><b>faviconmimetype</b> : Specify the mime type for actual file to be served in the favicon.ico response <i>[Default = image/x-icon]</i></p>
<p>Ensure this is correct for the type of image being used so it is valid.</p>
<p><br><b>robotstxtfile</b> : Specify the file to be returned as the robots.txt when queried by search engines, etc to attempt to prevent incorrect access to the server's pages which may cause invalid client connections <i>[Default = &lt;no&nbsp;value&gt;]</i></p>
<p>The default behaviour is to return a robots.txt reponse indicating not to look at any of the server's pages i.e.</p>
<p style="padding-left:25px;"><b>User-agent:*<br>
Disallow:/</b></p>
<p><br><b>metainterval</b> : Specify the metadata transmission interval in bytes <i>[Default = 8192]</i></p>
<pre>This is only used for v1 based client connections and is recommended to
leave at default value to ensure best compatibility with v1 based clients.</pre>

<p><br><b>uvoxcipherkey</b> : Specify the key used to obfuscate the initial handshaking with the source <i>[Default = foobar]</i></p>
<pre>This is a SHOUTcast 2 only feature and it matches the 'djcipher'
value in the sc_trans configuration file (see <a href="http://wiki.winamp.com/wiki/SHOUTcast_DNAS_Transcoder_2#DJ_Support">Transcoder - section 3.3</a>).</pre>
<p>Only change this if you really need to do so as not all SHOUTcast 2 clients will allow you to edit this value from the default value. If using the Source DSP plug-in then see <a href="http://wiki.winamp.com/wiki/Source_DSP_Plug-in#SHOUTcast_2_Cipher_Key">Source DSP - section 5.0</a> for details on how to change the plug-in to use a different value.</p>

<p><br></p>

<a name="Networking"></a><h2>4.8.&nbsp;Networking <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p><b>namelookups</b> : Enable to allow reverse DNS look-ups on incoming IP addresses <i>[Default = 0]</i></p>
<pre>It is not guaranteed that a client provides a DNS name which can be shown and it is more
common to just see the raw IP address of the client even if this option has been enabled.</pre>
<p><b>portbase</b> : Specify the port which clients and sources need to use to connect to the server <i>[Default = 8000]</i></p>
<pre>SHOUTcast 1 sources are only able to connect to 'portbase + 1' though
in the source configuration you must specify the value of 'portbase'.</pre>
<p><b>publicport</b> : Specify the port reported to the YP server and used in the direct playlists provided by the DNAS server when using port-mapping for example on the host which can otherwise cause clients to be provided with a stream address which will be wrong and prevent the client connection working <i>[Default = &lt;no&nbsp;value&gt;]</i></p>
<pre>If this is not specified then 'portbase' will be used as is the existing port
handling behaviour of all DNAS server versions before this was added.</pre>
<p><b>portlegacy</b> : Specify the port which legacy v1 sources use to connect to the server if normal behaviour (portbase+1) is not appropriate or needs to be disabled <i>[Default = &lt;no&nbsp;value&gt;]</i></p>
<pre>Only use this option if you have a real reason and know what it can break.</pre>
<p>If this option is not specified then '<b>portbase</b>' will be followed as per existing behaviour, otherwise it will be used and legacy v1 sources will need to connect on '<b>portlegacy - 1</b>' e.g. portlegacy=8001 then in the legacy v1 source settings it will need to have 8000 entered as the port to be used.</p>
<p>If this is set to zero then this will disable legacy v1 source connections so only v2 sources will be able to connect to the server on '<b>portbase</b>'.</p>
<p><br><b>autodumptime</b> : Specify how long before an idle connection is dumped from the server (in seconds) <i>[Default = 30]</i></p>
<pre>A value of zero means there is no timeout of an idle connection. If you set this
too low then it is likely that valid sources will fail to connect during the initial
stages of a source connection and client connections may timeout unexpectedly.</pre>
<p><br><b>maxheaderlinesize</b> : Specify the maximum size of an HTTP header line <i>[Default = 4096]</i></p>
<p><b>maxheaderlinecount</b> : Specify the maximum header lines in an HTTP style exchange <i>[Default = 100]</i></p>
<p><br><b>adminpassword</b> : Specify the administrator password for accessing the remote server features <i>[Default = &lt;no&nbsp;value&gt;]</i></p>
<pre>This cannot be the same as 'password' and also this can only
be changed by editing the configuration file and a restart.</pre>
<p><b>password</b> : Specify the password for broadcasters when connecting to the server <i>[Default = &lt;no&nbsp;value&gt;]</i></p>
<pre>This matches the 'password' value in the sc_trans
configuration file (see <a href="http://wiki.winamp.com/wiki/SHOUTcast_DNAS_Transcoder_2#Network_Options">Transcoder - section 3.11</a>).</pre><br><br>
<p><b>disableicy</b> : Specify whether the DNAS server should provide ICY or HTTP headers for client connections <i>[Default = 0]</i></p>
<p>If this is enabled (<b>disableicy=1</b>) then it can help allow HTML5 based clients to connect to the stream as it will remove some SHOUTcast specific aspets (e.g. in-stream metadata) which will allow them to play the stream. See <a href="#HTTP_Protocol_Compatibility">section 6.1</a> for more information about this and ICY vs HTTP as the stream protocol.</p>

<p><br><b>&lt;MULTI&gt; </b>(one set for each stream configuration):</p>
<p><b>streamportlegacy</b> : Specify the stream specific port which legacy v1 sources use to connect to the server if normal behaviour (portbase+1) is not appropriate or needs to be overriden <i>[Default = &lt;no&nbsp;value&gt;]</i></p>
<pre>Only use this option if you have a real reason and know what it can break.</pre>
<p>If this option is not specified then '<b>portbase</b>' will be followed, otherwise it will be used and legacy v1 sources will need to connect on '<b>streamportlegacy - 1</b>' e.g. streamportlegacy=8001 then in the legacy v1 source settings it will need to have 8000 entered as the port to be used.</p>
<pre><b>Important Note:</b> This is an experimental feature and will work,
however title updates from most legacy v1 sources will not work
due to them expecting to send title updates to 'portbase' which
is no longer the case when this option is enabled.

You will need to send any title updates manually using the 'updinfo'
method (see <a href="#Administration_Pages">section 5.1.2</a>) or update to use a v2 compatible source.</pre>
<p><br></p>

<a name="Network_Buffers"></a><h2>4.9.&nbsp;Network Buffers <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p><b>buffertype</b> : Specify whether the buffer size is fixed [0] or adaptive [1] <i>[Default = 1]</i></p>
<p><b>adaptivebuffersize</b> : Specify the buffer size in seconds if buffer is set to adaptive <i>[Default = 5]</i></p>
<p><b>fixedbuffersize</b> : Specify the buffer size in bytes if the buffer is set to fixed <i>[Default = 1048576]</i></p>
<p><b>bufferhardlimit</b> : Specify the maximum buffer size in bytes which it can never go above <i>[Default = 16777216]</i></p>
<p><br></p>

<a name="Relaying"></a><h2>4.10.&nbsp;Relaying <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p><b>allowrelay</b> : Enable to allow a relay to connect to the server <i>[Default = 1]</i></p>
<p><b>allowpublicrelay</b> : Enable to allow relays to list themselves in the YP directory <i>[Default = 1]</i></p>
<p><b>relayreconnecttime</b> : Specify how many seconds to wait to reconnect on a relay failure <i>[Default = 30]</i></p>
<pre>Setting this to 0 will disable attempts for the relay to reconnect.</pre>
<p><b>relayconnectretries</b> : Specify the number of times relays are attempted to be connected to if it is initially unable to connect <i>[Default = 0]</i></p>
<pre>A value of zero means there is no limit on the number
of attempts made to reconnect to the relay source.</pre>
<p>If a maximum bitrate is specified on the stream either via the maxbitrate or streammaxbitrate configuration options (see <a href="#Stream_Configuration">section 4.12</a>) and an invalid bitrate is detected, only one attempt is made to connect to the relay source. A manual re-connect can be started.</p>
<p><b>maxhttpredirects</b> : Specify the maximum number of times we can redirect when relaying <i>[Default = 5]</i></p>
<p><br><i>&lt;Legacy Options&gt;</i></p>
<p><b>relayport</b> : Port of the source to use for the relay <i>[Default = 80]</i></p>
<p><b>relayserver</b> : Address of the source to relay <i>[Default = &lt;no&nbsp;value&gt;]</i></p>
<pre>Using the stream configuration options (see <a href="#Stream_Configuration">section 4.12</a>) is the preferred method
of setting up a relay. These options are only provided as a means for loading
legacy configuration files. If found then these are mapped to 'streamrelayurl_1'.</pre>
<p><br></p>

<a name="Reserved_List"></a><h2>4.11.&nbsp;Reserved List <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<pre>It is possible to use hostnames as well as a raw IP address but for this
to work fully it requires namelookups=1 (see <a href="#Networking">section 4.8</a>) to be enabled.</pre>
<p><b>riponly</b> : Only allow connections to be made from those in the reserved list <i>[Default = 0]</i></p>
<pre>This will always allow connections made from 127.0.0.1 (localhost) or 127.0.1.1
even if it is not added to the reserved list to allow local monitoring of output.</pre>
<p><b>ripfile</b> : File to store the list of reserved IP and host addresses <i>[Default = sc_serv.rip]</i></p>
<p><b>saveriplistonexit</b> : Write any changes to the 'ripfile' when required <i>[Default = 1]</i></p>
<pre>If you are using a folder for saving the file into then you need to ensure that the
folder already exists as the DNAS server will not attempt to the create the folder.</pre>
<p><br></p>



<a name="Stream_Configuration"></a><h2>4.12.&nbsp;Stream Configuration <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p><b>Important Note:</b> If you do not specify an identifier (_#) on the end of the above options then it will be treated like _1 (effectively acting like a v1 DNAS). As well, _0 is not a supported identifier and will be mapped to _1.</p>
<p><br><b>requirestreamconfigs</b> : Only allow sources to connect if a stream configuration has been set in our configuration file <i>[Default = 0]</i></p>
<pre>With this enabled, you will need to ensure that any sources have their
configuration details setup to match those in sc_trans's configuration, in
particular the 'streamid' value with sc_trans (see <a href="http://wiki.winamp.com/wiki/SHOUTcast_DNAS_Transcoder_2#Network_Options">Transcoder - section 3.11</a>).</pre>
<p><b>maxbitrate</b> : Specify the maximum bitrate allowed in bits per second for streams connected to the server which is enforced when the source connection is made.<i>[Default = &lt;no&nbsp;value&gt;]</i></p>
<pre>If this is not specified then no check of the bitrate is made as the source
connects. This is used in conjunction with 'streammaxbitrate' to enable
per-stream as well as global control of the bitrate of source connections.</pre>

<p><br><b>&lt;MULTI&gt; </b>(one set for each stream configuration):</p>
<p><b>streamid</b> : Specify the numerical identifier of the stream for control or referencing the stream configuration. This can only be a numeric value from 1 to 2147483647.</p>
<p style="padding-bottom:0px;">If you use multiple stream configurations then you will need to ensure the _X part is specified and correct for each stream configuration group e.g.
<p style="padding-left:25px;">streamid=1<br>
streampath=random<br>
<i>or</i><br>
streamid_1=1<br>
streampath_1=random_stream_path<br>
streamid_2=2<br>
streampath_2=another_stream_path</p>
<p><b>streamauthhash</b> : The authorisation key needed for YP2 directory registration.</p>
<pre>This is a requirement for using the YP2 system and without it you will
not be able to successfully connect to the YP2 directory (see <a href="#Getting_Started">section 3.0</a>).

This can be used for multiple streams you are providing or can be different
(as long as valid) so you can infact provide multiple stations from the same
server if desired.</pre>
<p><b>streampath</b> : Specify the path clients need to use to access the stream.</p>
<pre>If a / is not specified at the start of the path then the server will add it to
the generated path in all uses of the streampath as required so that
http://&lt;serverurl&gt;/&lt;streampath&gt; will always provide a value url for clients.

If this is not specified for a stream, http://&lt;serverurl&gt;/ is the path used to
access streamid=1 whilst http://&lt;serverurl&gt;/stream/&lt;streamid&gt;/ is the path
for all other stream configurations. This difference allows for better legacy
handling with 3rd party tools. See <a href="#Stream_Addresses">section 6.0</a> for more information on the
server's stream address support.</pre>
<p><b>streamrelayurl</b> : Specify the full url of source to relay (if this is a relay).</p>
<pre>Make sure if you use this that the full url is entered and that it is
the url which clients would connect to for the stream to be relayed.</pre>
<p><b>streambackupurl</b> : Specify the full url of a source stream to be used as an alternative incase the normal source for the stream (be it a direct connection or as part of a relay) disconnects. Unless the backup is directly kicked, the DNAS will use the backup until the original source reconnects or is found to be running again when used with a relay source configuration.</p>
<pre>Make sure if you use this that the url entered is available and can be
assumed to be a reliable backup source for the stream.</pre>
<p>The backup cannot be the same as the original relay source and if this happens then the backup will not be used e.g. using server:8000/stream/1/ when the original stream is server:8000/stream/1/. This does not prevent the use of another stream provided on the same server being used as the backup e.g. server:8000/stream/2/ for server:8000/stream/1/.</p>
<p>The backup source specified needs to be in the same format and bitrate as the original stream to ensure it will not cause clients problems. The details of the stream will be checked against the prior source and the backup source will not be used if the stream details do not match.
<p>If specified for a relay source (via 'streamrelayurl'), if the relay source fails then the backup source is used (if available) as well as the server attempting to reconnect to the original relay source. As soon as the original relay source is found to be running again, the server will automatically switch back to using it inplace of the backup source.</p>

<p><b>streammaxuser</b> : Specify the maximum number of clients allowed to connect to the stream [<i>Default = 0</i>]</p>
<pre>If set to zero, not specified or higher than 'maxuser' then the value set
for 'maxuser' (see <a href="#Client_Behaviour">section 4.2</a>) will be used for all known streams.</pre>
<p style="padding-bottom:0px;">Changing this to a value between zero and 'maxuser' will enforce the user connection limit for the specified value in the stream configuration e.g.<p>
<p style="padding-left:25px;">streammaxuser_1 = 8<br>maxuser = 32</p>
<p>This allows a total of 32 connections to the server but specifies the maximum number of connections to the first stream configuration is 8.<br><br>
With the following stream configuration</p>
<p style="padding-left:25px;">streammaxuser_1 = 64<br>maxuser = 32</p>
<p>This allows a total of 32 connections to the server but with a per stream limit above the maximum means the maximum number of connections to the first stream group will be 32. However this also depends upon any other stream configurations and their limits as to whether 32 clients will be able to connect to this stream configuration.</p>
<p>Finally unless a valid stream configuration is specified then this value will only be applied to the first stream configuration found i.e. there is a need to specify a streamid_XXX for streammaxuser_XXX (where XXX is the stream identifier of the stream configuration group.</p>

<p><br><b>streamadminpassword</b> : Specify the administrator password for accessing the remote server features for the specified stream configuration group. If this is not specified then 'adminpassword' will be used.</p>
<p><b>streampassword</b> : Specify the password for broadcasters when connecting to the server for the specified stream configuration group. If this is not specified then 'password' will be used.</p>
<pre>This matches the 'password' value in the sc_trans configuration file (see <a href="http://wiki.winamp.com/wiki/SHOUTcast_DNAS_Transcoder_2#Network_Options">Transcoder - section 3.11</a>).</pre>
<p><b>streampublicserver</b> : This allows you to override the public flag received from the source when a connection is being made to the YP directory. If this is not specified or is set to empty then 'publicserver' will be used.</p>
<p><b>streamallowrelay</b> : Enable to allow a relay to connect to the server. If this is not specified then 'allowrelay' will be used.</p>
<p><b>streamallowpublicrelay</b> : Enable to allow relays to list themselves in the YP directory. If this is not specified then 'allowpublicrelay' will be used.</p>
<p><b>streamriponly</b> : Enable to only allow connections to be made from reserved list addresses. If this is not specified then 'riponly' will be used.</p>
<p><b>streamautodumptime</b> : Specify how long before an idle connection will be dumped from the server (in seconds). A value of zero means there is no timeout of an idle connection. If not specified then 'autodumpsourcetime' will be used.</p>
<p><b>streamautodumpusers</b> : Enable to allow the server to disconnect clients if the source disconnects. If not specified then 'autodumpusers' will be used.</p>
<p><b>streamlistenertime</b> : Specify the maximum time in minutes a client is allowed to listen to the stream. A value of zero means there will be no time limit. If not specified then 'listenertime' will be used.</p>
<p><b>streamintrofile</b> : File to play when a client first connects to the server. If this is not specified then 'introfile' will be used. See <a href="#Introduction_and_Backup_Files">section 4.5</a> for details about using this option.</p>
<p><b>streambackupfile</b> : File to play if the source disconnects from the server. If this is not specified then 'backupfile' will be used. See <a href="#Introduction_and_Backup_Files">section 4.5</a> for details about using this option.</p>
<p><b>streambanfile</b> : File to store the list of banned IP addresses. If this is not specified then 'banfile' will be used.</p>
<p><b>streamripfile</b> : File to store the list of reserved addresses. If this is not specified then 'ripfile' will be used.</p>
<p><b>streamw3clog</b> : File to store the web connections logs into. If this is not specified then 'w3clog' will be used.</p>
<p><b>streamsonghistory</b> : Specify the maximum song history to preserve <i>[Default = 10]</i></p>
<pre>If not specified then the value set for 'songhistory' (see <a href="#Statistics">section 4.16</a>) will be used
for all known streams.

If set to zero, no song history will be preserved for the specified stream and the
played?sid=# page for the stream will be hidden from view on the header of the
/index.html?sid=# page.</pre>
<p><b>streammaxbitrate</b> : Specify the maximum bitrate allowed in bits per second of the stream which is enforced when the source connection is made. If this is not specified then 'maxbitrate' will be used as appropriate to its value.</p>
<p><b>streamhidestats</b> : Specify control of which public pages can be viewed for the stream.</p>
<p>This can accept the following parameters:</p>
<p style="padding-left:25px;margin-top:0px;"><b>streamhidestats=stats</b>&nbsp;&nbsp;&rarr;&nbsp;&nbsp;redirects the /stats?sid=# and /statistics?sid=# pages<br>
<b>streamhidestats=all</b>&nbsp;&nbsp;&rarr;&nbsp;&nbsp;redirects the /index?sid=#, /played?sid=# pages, /currentsong?sid=#, /nextsong?sid=# and /nextsongs as well as those from streamhidestats=stats</p>
<p><b>streamredirecturl</b> : Specify a page to be used as a redirect page when hidestats or the stream specific streamhidestats options are enabled.</p>
<p><b>streammovedurl</b> : Specify an url to provide to clients when the access the stream for when it has moved to a different server or has been retired and you want to move clients from the existing stream to the new stream specified. This mode will prevent any sources from being connected for the stream.</p>
<p><br></p>



<a name="Web_Connection_(W3C)_Logging"></a><h2>4.13.&nbsp;Web Connection (W3C) Logging <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p><b>w3cenable</b> : Enable logging of web connections to describe the duration a client has listened to a specific title <i>[Default = 1]</i></p>
<p><b>w3clog</b> : File to store the web connections logs into <i>[Default = sc_w3c.log]</i></p>
<pre>If you are using a folder for saving the file into then you need to ensure that the
folder already exists as the DNAS server will not attempt to the create the folder.</pre>
<p><br></p>

<a name="YP_Server_Behaviour"></a><h2>4.14.&nbsp;YP Server Behaviour <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p><b>ypaddr</b> : Allows you to specify a different YP server if required <i>[Default = yp.shoutcast.com]</i></p>
<p><b>ypport</b> : Allows you to specify the port of the YP server if required <i>[Default = 80]</i></p>
<p><b>yppath</b> : Allows you to specify the path to YP2 services on the server <i>[Default = /yp2]</i></p>
<p><b>yptimeout</b> : Specify the timeout interval in seconds for requests made to the YP server <i>[Default = 30]</i></p>
<pre>The actual interval between requests can be up to a few seconds longer
depending on the action being carried out and the handling of any errors.</pre>
<p><b>ypmaxretries</b> : Specify the maximum number of times a YP request will be attempted <i>[Default = 10]</i></p>
<pre>This is related to the actual attempts to make and get a valid
HTTP response from the YP server for the requested action(s).</pre>
<p><b>ypreportinterval</b> : Specify the maximum time in which the YP must have contacted our server in seconds <i>[Default = 300]</i></p>
<p><b>ypminreportinterval</b> : Specify the minimum time in which the YP can contact our server in seconds <i>[Default = 10]</i></p>

<p><br><b>publicserver</b> : This allows you to override the public flag from the connected source when a connection is being made to the YP directory <i>[Default = default]</i></p>
<p>               This can be one of the following values:

                   default - use the flag provided by the source
                   always - force the source to be public
                   never - never allow the use the flag provided by the source</p>
<pre>When using sc_trans this would match with the
'public' value (see <a href="http://wiki.winamp.com/wiki/SHOUTcast_DNAS_Transcoder_2#Metadata_Control">Transcoder - section 3.8</a>).</pre>
<p>If this is enabled or the stream specific version, the server will keep trying to get a valid response to allow it to be listed in the Directory such as if there is a loss of internet connection or an error with the stream(s) being seen by the Directory tester for example.</p>
<p><br><b>autoauthhash</b> : This determines if the DNAS server attempts to automatically generate an authhash for publically configured streams if an authhash was not already specified for the stream when it attempts to be listed <i>[Default = 1]</i></p>
<pre>This makes it quicker to get a stream listed in the Directory by using the
information provided by the stream source. It is recommended to review the
details used to create the automatic authhash and amend them as required.</pre>
<p><br></p>

<a name="YP_Server_Errors"></a><h2>4.15.&nbsp;YP Server Errors <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>There is nothing to configure for this now that there is no 'yp2' configuration options. This section is provided as a means to better understand some of the errors which occur.</p>
<p>If not all of the required values are set for a public listing then the DNAS server will throw an error and will abort its attempt to be listed in the Directory. It should be indicated the error is with one of the error codes provided below so it can be resolved.</p>
<p>Additionally if there is an issue during Directory updates or removals, then the server will report an error in its log ouput as one of the following error codes and <message>.</p>
<p><table style="padding-left:50px;">
<tr><td class="pages"><b>Code</b></td><td><b>Message</b></td></tr>
<tr><td class="pages">400</td><td>Generic error (covers all other cases usually from internal failures)</td></tr>
<tr><td class="pages">457</td><td>Unrecoverable error while updating station information - DNAS restart required.</td></tr>
<tr><td class="pages">470</td><td>Invalid authorization hash</td></tr>
<tr><td class="pages">471</td><td>Invalid stream type (could be a bad bitrate or mime type)</td></tr>
<tr><td class="pages">472</td><td>Missing or invalid stream url</td></tr>
<tr><td class="pages">473</td><td>Server unreachable by YP</td></tr>
<tr><td class="pages">474</td><td>Relay url does not exist</td></tr>
<tr><td class="pages">475</td><td>Invalid server ID</td></tr>
<tr><td class="pages">476</td><td>Invalid max clients (value out of range or missing)</td></tr>
<tr><td class="pages">477</td><td>Terms of Service violator.  You are being reported.</td></tr>
<tr><td class="pages">478</td><td>Incompatible protocol.</td></tr>
<tr><td class="pages">479</td><td>Streams requiring authorization are not public and cannot list here.</td></tr>
<tr><td class="pages">480</td><td>Cannot see your station/computer (URL: <streamurl>) from the Internet, disable Internet Sharing/NAT/firewall/ISP cache.</td></tr>
<tr><td class="pages">481</td><td>Cannot verify server since all listener slots are full.  Please wait.</td></tr>
<tr><td class="pages">482</td><td>This network has been permanently banned due to a previous violation of the SHOUTcast directory terms of service</td></tr>
<tr><td class="pages">483</td><td>Invalid listeners (value out of range / missing)</td></tr>
<tr><td class="pages">484</td><td>Invalid avglistentime (value out of range / missing)</td></tr>
<tr><td class="pages">485</td><td>Invalid newsessions (value out of range / missing)</td></tr>
<tr><td class="pages">486</td><td>Invalid connects (value out of range / missing)</td></tr>
<tr><td class="pages">487</td><td>Request & Response objects are null</td></tr>
<tr><td class="pages">488</td><td>Request xml is null</td></tr>
<tr><td class="pages">489</td><td>YP command not specified</td></tr>
<tr><td class="pages">490</td><td>Generic error, while doing xml parsing</td></tr>
<tr><td class="pages">491</td><td>Generic error, while reading xml request</td></tr>
<tr><td class="pages">492</td><td>Error closing buffer / HTTP connection / object / statement / etc</td></tr>
<tr><td class="pages">493</td><td>Internal error - unable to acquire data source</td></tr>
<tr><td class="pages">494</td><td>Error updating information - DNAS restart required</td></tr>
<tr><td class="pages">495</td><td>Error acquiring station ID - DNAS restart required</td></tr>
<tr><td class="pages">496</td><td>Error converting data type</td></tr>
<tr><td class="pages">497</td><td>Inconsistent stream behaviour</td></tr>
<tr><td class="pages">498</td><td>Invalid Request (Invalid request received)</td></tr>
<tr><td class="pages">499</td><td>Error while getting information</td></tr>
</table></p>
<p><br></p>

<a name="Statistics"></a><h2>4.16.&nbsp;Statistics <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p><b>hidestats</b> : Specify control of which public pages can be viewed <i>[Default = &lt;no&nbsp;value&gt;]</i></p>
<p>This can accept the following parameters:</p>
<p style="padding-left:25px;margin-top:0px;"><b>hidestats=stats</b>&nbsp;&nbsp;&rarr;&nbsp;&nbsp;redirects the /stats and /statistics pages<br>
<b>hidestats=all</b>&nbsp;&nbsp;&rarr;&nbsp;&nbsp;redirects the /index, /played pages, /currentsong, /nextsong and /nextsongs as well as those from hidestats=stats</p>
<p><br><b>redirecturl</b> : Specify a page to be used as a redirect page when hidestats or the stream specific 'streamhidestats' options are enabled <i>[Default = &lt;no&nbsp;value&gt;]</i></p>
<p><br>Depending on how 'hidestats' and 'streamhidestats' have been specified, there is an order for the way they are used to redirect clients accessing the public pages. The following shows the order of preceedence from highest (left) to lowest (right) with the per-stream options always having the greatest priority.</p>
<p><br>If 'hidestats=stats' or 'streamhidestats=stats' are specified:</p>
<p style="padding-left:25px;"><b>streamredirecturl</b>&nbsp;&nbsp;&rarr;&nbsp;&nbsp;<b>redirecturl</b>&nbsp;&nbsp;&rarr;&nbsp;&nbsp;<b>/index.html</b> (default for unknown pages)</p>
<p>If 'hidestats=all' or 'streamhidestats=all' are specified:</p>
<p style="padding-left:25px;"><b>streamredirecturl</b>&nbsp;&nbsp;&rarr;&nbsp;&nbsp;<b>streamurl</b> (taken from current source if connected)&nbsp;&nbsp;&rarr;&nbsp;&nbsp;<b>redirecturl</b>&nbsp;&nbsp;&rarr;&nbsp;&nbsp;<b>403 (Service Forbidden)</b></p>
<p><br><b>songhistory</b> : Specify the maximum song history to preserve <i>[Default = 10]</i></p>
<pre>If set to zero, no song history will be preserved for any streams and the /played.html
page for any streams will be hidden from view on the header of all /index.html pages.</pre>
<p><br></p>

<a name="Administration"></a><h2>5.&nbsp;Administration <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<div class="thumb"><a href="res/Server_Source_Login_Page.png" title="Example Administration Page Showing the Server Source Login Page"><img class="thumb" alt="Example Administration Page Showing the Server Source Login Page" src="res/Server_Source_Login_Page.png"></a></div>
<p>The DNAS server provides administration pages available for accessing and controlling the DNAS server remotely which allows you to monitor and control clients connected to the stream (or not if banning them) along with accessing general statistics from the server.</p>
<p style="margin-bottom:0px;"><br>These pages can now be accessed through the streams summary page at <b>/index.html?sid=0</b> which will show a link to any active stream(s) at the time or you explicitly access them via the <b>/index.html?sid=#</b> path where <b>#</b> is the ID of the stream (see <a href="#Stream_Configuration">section 4.12</a> for more
about using 'streamid')<br>e.g.</p>
<p style="padding-left:25px;margin-top:0px;">&lt;serverurl&gt;/index.html?sid=1</p>
<p>If no sid is passed and if there is only one stream active then you will be taken to its
summary page. If an invalid sid is passed then you will be taken to the streams summary
page at <b>/index.html?sid=0</b></p>
<p><br>As an alternative to using the 'streamid' to access stream specific pages, 'streampath' can also be used to access the stream pages. If the streampath specified can be matched to a valid streamid then the requested action is performed, otherwise the no sid or an invalid sid behaviour is used depending on the method being requested at the time.</p>
<p>The syntax is <b>sp=&lt;streampath&gt;</b> where <b>&lt;streampath&gt;</b> can be either the value specified by the 'streampath' configuration option or it can be a default streampath as detailed in the server's stream address support in <a href="#Stream_Addresses">section 6.0</a>. The following examples show how to access the same page using either the streamid or the streampath method:</p>
<p style="padding-left:25px;"><b>&lt;serverurl&gt;/index.html?sp=/ &rarr; &lt;serverurl&gt;/index.html?sid=1</b><br>
<br>
<b>&lt;serverurl&gt;/index.html?sp=/stream/2/ &rarr; &lt;serverurl&gt;/index.html?sid=2</b><br>
<br>
If the streampath for stream #3 is configured as streampath_3=Live then<br>
<b>&lt;serverurl&gt;/index.html?sp=Live &rarr; &lt;serverurl&gt;/index.html?sid=3</b></p>
<p><br></p>

<a name="Administration_Pages"></a><h2>5.1.&nbsp;Administration Pages <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>The administrative features provided can be split into public and private pages, with all private pages requiring a password to access them. Unless public pages have been disabled or set to be redirected, then no password is needed to access them and anyone is able to access them. If public pages are configured to be disabled or redirected, then a password can still be used to access the page as detailed in the following sections.</p>
<pre>When accessing any of the pages which require a username, the username is '<b>admin</b>'.</pre>
<p><br></p>

<a name="Public_Pages"></a><h2>5.1.1.&nbsp;Public Pages <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<div class="thumb"><a href="res/Streams_Summary_Page.png" title="Streams Summary Page"><img class="thumb" alt="Streams Summary Page" src="res/Streams_Summary_Page.png"></a></div>
<p><table><tr valign="top"><td class="pages">
<b>index.html?sid=0</b></td>
<td>Shows the streams summary page showing any active stream(s)</td>
</tr></table></p>

<p><table><tr valign="top"><td class="pages">
<b>currentsong?sid=#</b></td>
<td>Returns the current song title or a null response</td>
</tr><tr valign="top"><td class="pages">
<b>nextsong?sid=#</b></td>
<td>Returns the next song title (if known) or a null response</td>
</tr></table></p>

<pre>currentsong and nextsong provide UTF-8 encoded copies of the song title,
otherwise they return effectively a no response (ignoring the http header).</pre>

<p><table><tr valign="top"><td class="pages">
<b>nextsongs?sid=#</b><br>
<b>nextsongs?sid=#&json=1</b><br>
<b>nextsongs?sid=#&json=1&callback=function</b></td>
<td>Returns the next song title(s) in the requested format to be played when using a v2 stream source. See <a href="#XML_/_JSON_/_JSON-P_Responses">section 5.2</a> for more details on the format of the response returned.</td>
</tr></table></p>

<div class="thumb"><a href="res/Stream_Summary_Page.png" title="Stream Summary Page"><img class="thumb" alt="Stream Summary Page" src="res/Stream_Summary_Page.png"></a></div>
<p><br><table><tr valign="top"><td class="pages">
<b>index.html?sid=#</b></td>
<td>Shows current status of the specified stream</td>
</tr></table></p>

<p><table><tr valign="top"><td class="pages">
<b>played.html?sid=#</b><br>
<b>played?sid=#</b><br>or<br>
<b>played?sid=#&type=xml</b><br>
<b>played?sid=#&type=json</b><br>
<b>played?sid=#&type=json&callback=function</b></td>
<td>Song history of the specified stream in the requested format (if no 'type' parameter is specified then the HTML version will be provided). See <a href="#XML_/_JSON_/_JSON-P_Responses">section 5.2</a> for more details on the format of the response returned.</td>
</tr></table></p>

<p><br><table><tr valign="top"><td class="pages">
<b>listen.pls?sid=#</b><br>
<b>listen?sid=#</b></td>
<td>Provides a PLS file for clients to use to connect to the stream.</td>
</tr><tr valign="top"><td class="pages">
<b>listen.m3u?sid=#</b></td>
<td>Provides a M3U file for clients to use to connect to the stream.</td>
</tr><tr valign="top"><td class="pages">
<b>listen.asx?sid=#</b></td>
<td>Provides a ASX file for clients to use to connect to the stream.</td>
</tr><tr valign="top"><td class="pages">
<b>listen.xspf?sid=#</b></td>
<td>Provides a XSPF file for clients to use to connect to the stream.</td>
</tr><tr valign="top"><td class="pages">
<b>listen.qtl?sid=#</b></td>
<td>Provides a QTL file for clients to use to connect to the stream.</td>
</tr></table></p>
<pre>With the listen pages you either need to have specified an address with 'destip'
(see <a href="#Client_Behaviour">section 4.2</a>) or leave empty and allow the server to attempt to auto-generate
the address required for the client to be able to connect. Also if listed in the
Directory and there is a backupserver, then it will output it as a second entry.</pre>

<p><br><table><tr valign="top"><td class="pages">
<b>home.html?sid=#</b><br>
<b>home?sid=#</b></td>
<td>Opens in a new window or tab (depending on the client browser) the 'streamurl' as specified by the stream source. If this is not set then the client will be redirected to the shoutcast.com main page.</td>
</tr></table></p>

<p><br><table><tr valign="top"><td class="pages">
<b>stats?sid=#</b><br>
<b>stats?sid=#&json=1</b><br>
<b>stats?sid=#&json=1&callback=function</b><br>
<b>stats?sid=#&json=1&callback=function&pass=&lt;password&gt;</b>
</td>
<td>Provides a summary of information about the stream. This matches the private administrator version from <b>admin.cgi?sid=#&mode=viewxml&page=1</b></td>
</tr></table></p>
<pre>This is the modern version of the 7.html page as provided by legacy v1 servers.
See <a href="#XML_/_JSON_/_JSON-P_Responses">section 5.2</a> for more details on the format of the response returned.</pre>

<p><br><table><tr valign="top"><td class="pages">
<b>7.html?sid=#</b><br>
<b>7.html?sid=#&pass=&lt;password&gt;</b>
</td>
<td>Provides a reduced set of information about the specified stream which is compatible with reporting tools only compatible with v1 servers. For more detailed information about the stream use the '<b>stats</b>' request.</td>
</tr></table></p>

<p><br><table><tr valign="top"><td class="pages">
<b>statistics</b><br>
<b>statistics?json=1</b><br>
<b>statistics?json=1&callback=function</b><br>
<b>statistics?json=1&callback=function&pass=&lt;password&gt;</b>
</td>
<td>Provides a summary of information about any known and connected streams. This is the same information as shown via <b>stats?sid=#</b> and additionally provides consolidated statistics including the total number of clients connected to the server across all streams.</td>
</tr></table></p>
<pre>stats?sid=#, statistics and 7.html?sid=# methods support &pass=&lt;password&gt; on the request.
This works like the normal mode but only allows access when 'hidestats' is enabled if the
password matches to one allowing access to the stream's admin pages or source connections.</pre>

<p><br><table><tr valign="top"><td class="pages">
<b>streamart?sid=#</b><br>
<b>playingart?sid=#</b><br>
</td>
<td>Displays the artwork v2 compatible clients (e.g. Winamp 5.64 and up) may be able to display if the v2 source (if being used) provides it.</td>
</tr></table></p>

<p><br><table><tr valign="top"><td class="pages">
<b>shoutcast.swf</b></td>
<td>Provides shoutcast.swf if found in the same folder as the sc_serv[.exe] file is located for providing custom flash players to resolve some access issues so it comes from the same domain as the DNAS server.</td>
</tr></table></p>

<p><br></p>

<a name="Private_Pages"></a><h2>5.1.2.&nbsp;Private Pages <a style="font-size:55%;" href="#">[top]</a></h2>
<hr><br>
<div class="thumb"><a href="res/Server_Summary_Page.png" title="Server Summary Page"><img class="thumb" alt="Server Summary Page" src="res/Server_Summary_Page.png"></a></div>
<pre>By passing &pass=&lt;password&gt; where password is the 'adminpassword' (see <a href="#Networking">section 4.8</a>)
then it is possible to directly access the administration page(s) required. As well the
base64 encoded version of the password can be passed as long as it is prefixed with
YWRtaW46 e.g.&pass=changeme is the same as &pass=YWRtaW46Y2hhbmdlbWU=</pre>
<p><table><tr valign="top"><td class="pages">
<b>admin.cgi</b><br><br>
<b>admin.cgi?sid=0</b>
</td>
<td>Shows the an overall server summary page for the streams provided by the server including direct links to certain information pages (see notes about the <b>admin.cgi?sid=#&mode=viewxml</b> command for more info)</td>
</tr></table></p>

<p><div class="thumb"><a href="res/Stream_Admin_Page.png" title="Stream Admin Page"><img class="thumb" alt="Stream Admin Page" src="res/Stream_Admin_Page.png"></a></div><table><tr valign="top"><td class="pages">
<b>admin.cgi?sid=#</b>
</td>
<td>Shows the stream admin page for the specified stream</td>
</tr></table></p>

<p><br><table><tr valign="top"><td class="pages">
<b>admin.cgi?sid=#&mode=updinfo&song=title</b></td>
<td>If '<b>title</b>' is valid then the current title for the stream specified will be changed.</td>
</tr><tr valign="top"><td class="pages">
<b>admin.cgi?sid=#&mode=updinfo&url=myurl</b></td>
<td>If '<b>myurl</b>' is valid then the current songurl for the stream specified will be changed.</td>
</tr><tr valign="top"><td class="pages">
<b>admin.cgi?sid=#&mode=updinfo&dj=the_dj_name</b></td>
<td>If '<b>dj</b>' is valid then the current DJ for the stream specified will be changed.</td>
</tr><td colspan="2"><br>The '<b>song</b>', '<b>url</b>' and '<b>dj</b>' parameters can be sent at the same time and are used until the next use of this method or the next title update is received from the source. This will accept v2 XML metadata or v1 text only titles and will automatically handle them as applicable to the data received by the command.</td>
<tr valign="top">

</tr></table></p>

<div class="thumb"><a href="res/Server_Log_Page.png" title="Server Log Page"><img class="thumb" alt="Server Log Page" src="res/Server_Log_Page.png"></a></div>
<p><br><table><tr valign="top"><td class="pages">
<b>admin.cgi?sid=#&mode=viewlog</b>
</td><td>View logfile</td></tr>
<tr><td class="pages">
<b>admin.cgi?sid=#&mode=viewlog&viewlog=tail</b></td>
<td>View logfile (tailing)</td></tr>
<tr><td class="pages">
<b>admin.cgi?sid=#&mode=viewlog&viewlog=save</b>
</td>
<td>Save logfile as a gzip compressed archive</td>
</tr></table></p>

<pre>The tailing option keeps adding additional log entries to the end of the log
view once the current log has been loaded as long as the view is kept open.</pre>

<p><div class="thumb"><a href="res/Stream_Ban_List_Page.png" title="Stream Ban List Page"><img class="thumb" alt="Stream Ban List Page" src="res/Stream_Ban_List_Page.png"></a></div>
<br><table><tr valign="top"><td class="pages">
<b>admin.cgi?sid=#&mode=viewban</b>
</td>
<td>Ban view which matches the ban file and allows you to ban a single IP or an IP range from it (see section 4.1 for more info on the file)</td>
</tr></table></p>

<div class="thumb"><a href="res/Stream_Reserved_List_Page.png" title="Stream Reserved List Page"><img class="thumb" alt="Stream Reserved List Page" src="res/Stream_Reserved_List_Page.png"></a></div>
<p><br><table><tr valign="top"><td class="pages">
<b>admin.cgi?sid=#&mode=viewrip</b>
</td>
<td>Reserved list that matches the rip file (see section 4.11 for more info on the file)</td>
</tr></table></p>

<p><br><table><tr valign="top"><td class="pages">
<b>admin.cgi?sid=#&mode=art</b><br>
<b>admin.cgi?sid=#&mode=art&art=playing</b></td>
<td>Displays the artwork v2 compatible clients (e.g. Winamp 5.64 and up) may be able to display if the v2 source (if being used) provides it.</td>
</tr></table></p>

<pre>If no '&art=' is specified or not a matching option then the stream artwork
(if available) will be shown. If no '&art=playing' is specified then this will
show the playing file's artwork (if available).</pre>

<p><br><table><tr valign="top"><td class="pages">
<b>admin.cgi?sid=#&mode=viewxml</b><br>
<b>admin.cgi?sid=#&mode=viewxml&page=#</b><br>
<b>admin.cgi?sid=#&mode=viewjson</b><br>
<b>admin.cgi?sid=#&mode=viewjson&page=#</b><br>
<b>admin.cgi?sid=#&mode=viewjson&page=#&callback=function</b>
</td>
<td>Returns output of the choosen stream information in the requested format (supporting XML / JSON / JSON-P).</td>
</tr></table></p>
<p>If '<b>page</b>' is not set or is outside of the range 0 to 6 then this will output all of the information as the default viewxml or viewjson actions provide. Otherwise the response only displays information based on the value assigned to the '<b>page</b>' value which can be from 1 to 6 and maps as follows:</p>

<p>
<table style="padding-left:25px;"><tr>
<td>1&nbsp;&nbsp;&rarr;&nbsp;&nbsp;</td>
<td class="pages"><b>Stream Summary</b></td>
<td>This is the same as using the public <b>stats?sid=#</b> action</td>
</tr><tr>
<td>2&nbsp;&nbsp;&rarr;</td>
<td class="pages"><b>Not used</b></td>
<td>Previously used for Webdata Stats but not in current builds</td>
</tr><tr>
<td>3&nbsp;&nbsp;&rarr;</td>
<td class="pages"><b>Listener Stats</b></td>
<td></td>
</tr><tr>
<td>4&nbsp;&nbsp;&rarr;</td>
<td class="pages"><b>Song History</b></td>
<td></td>
</tr><tr>
<td>5&nbsp;&nbsp;&rarr;</td>
<td class="pages"><b>Stream Metadata</b></td>
<td>If supported by the source and can just be title</td>
</tr><tr>
<td>6&nbsp;&nbsp;&rarr;</td>
<td class="pages"><b>Stream Configurations</b></td>
<td>Displays all of the known stream configurations though this is only available on <b>admin.cgi</b></td>
</tr></table>
<p>If accessing the standard viewxml or viewjson or the listener stats (page = 3), you can also send <b>&iponly=1</b> which filters the listener information (if there are any) to just output the IP instead of the full information provided normally.</p>

<p><br><table><tr valign="top"><td class="pages">
<b>admin.cgi?sid=#&mode=resetxml</b>
</td>
<td>Will flush the held stream information to refresh it.</td>
</tr></table></p>

<p><br><table><tr valign="top"><td class="pages">
<b>admin.cgi?sid=#&mode=kicksrc</b>
</td>
<td>Will allow you to kick the currently connected source for the specified stream.</td>
</tr></table></p>

<p><br><table><tr valign="top"><td class="pages">
<b>admin.cgi?sid=#&mode=kickdst&kickdst=&lt;clients&gt;</b><br>
<b>admin.cgi?sid=#&mode=kickdst&kickdst=all</b>
</td>
<td>Will allow you to kick the currently connected client(s) for the specified stream. The &lt;clients&gt; parameter is a comma separated list of the unique id or IP address relating to the client.</td>
</tr></table></p>

<p><br><table><tr valign="top"><td class="pages">
<b>admin.cgi?sid=#&mode=ripdst&ripdst=&lt;IP&gt;</b>
</td>
<td>Where &lt;IP&gt; is the IP or the hostname to be reserved (see section 4.11 for more information).</td>
</tr></table></p>

<p><br><table><tr valign="top"><td class="pages">
<b>admin.cgi?sid=#&mode=unripdst&ripdst=&lt;IP&gt;</b>
</td>
<td>Where &lt;IP&gt; is the IP or the hostname to be unreserved (see section 4.11 for more information).</td>
</tr></table></p>

<p><br><table><tr valign="top"><td class="pages">
<b>admin.cgi?sid=#&mode=unbandst&bandst=&lt;IP&gt;.0&banmsk=0</b></td>
<td>Where &lt;IP&gt; is the first 3 parts of a subnet IP to unban.</td>
<tr><tr><td>
<b>admin.cgi?sid=#&mode=unbandst&bandst=&lt;IP&gt;&banmsk=255</b>
</td>
<td>Where &lt;IP&gt; is that of a single IP to unban.</td>
</tr></table></p>

<p><br><table><tr valign="top"><td class="pages">
<b>admin.cgi?mode=reservelist</b>
</td>
<td>This will reload any configured reserved list files from file without the need to restart the server.</td>
</tr></table></p>

<p><br><table><tr valign="top"><td class="pages">
<b>admin.cgi?mode=rotate</b><br>
<b>admin.cgi?mode=rotate&files=log|w3c</b>
</td>
<td>This will rotate the log files set via the 'logfile', 'w3clog' and 'streamw3clog' options. If <b>&files=</b> is specified then passing log or w3c will allow you to only rotate one type of file otherwise both will be rotated by this command.</td>
</tr></table></p>

<p><br><table><tr valign="top"><td class="pages">
<b>admin.cgi?mode=clearcache</b>
</td>
<td>This clears all cached copies of the following resources:<br>index.css, shoutcast.swf, crossdomain.xml, robots.txt and favicon.ico</td>
</tr></table></p>

<p><br><table><tr valign="top"><td class="pages">
<b>admin.cgi?mode=history</b></td>
<td>Song history of the specified stream. This is the same as using the public <b>played.html?sid=#</b> action.</td>
</tr></table><br></p>

<div class="thumb"><a href="res/Server_Bandwidth_Page.png" title="Server Bandwidth Page"><img class="thumb" alt="Server Bandwidth Page" src="res/Server_Bandwidth_Page.png"></a></div>
<p><table><tr valign="top"><td class="pages">
<b>admin.cgi?mode=bandwidth</b><br>
<b>admin.cgi?mode=bandwidth&refresh=XX</b><br>
<b>admin.cgi?mode=bandwidth&type=xml|json</b><br>
<b>admin.cgi?mode=bandwidth&type=json&callback=function</b><br>
</td>
<td>This outputs bandwidth information about the server e.g. amount of data sent to clients. It will show a page with a formatted table or int the requested format. See <a href="#XML_/_JSON_/_JSON-P_Responses">section 5.2</a> for more details on the format of the response returned.</td>
</tr></table></p>

<p><br><table><tr valign="top"><td class="pages">
<b>admin.cgi?mode=ypstatus&type=xml</b><br>
<b>admin.cgi?mode=ypstatus&type=json</b><br>
<b>admin.cgi?mode=ypstatus&type=json&callback=function</b>
</td>
<td>This provides information on the listing state of all known streams configured on the server in the requested format.</td>
</tr></table></p>

<p><br><table><tr valign="top"><td class="pages">
<b>admin.cgi?mode=reload</b><br>
<b>admin.cgi?mode=reload&force=1</b>
</td>
<td>This reloads the stream configuration details in the main configuration file the server used when started and is only available on the admin summary page and so can only be run by the master administrator password.</td>
</tr></table></p>
<p>This command works on the server as a whole (hence no sid parameter) and it will add or remove or update any stream configuration as applicable which will cause any connected sources and clients to be kicked as applicable (usually if a stream configuration was removed).</p>
<p>This will recognise any configurations included via 'include' entries so you can have '<b>include=streams/*.conf</b>' in your main configuration file which the server can then use to detect different stream configurations.</p>
<p>If '<b>&force=1</b>' is passed then the reload will treat the updating of active stream configurations in the same manner as a stream configuration removal instead of trying to update compatible stream configuration details without resetting the stream e.g. not increasing the 'streammaxuser' when it could be increased.</p>
<div class="serv"><a href="res/Admin_Config_Reload.png" title="Console Output after a Config Reload"><img class="serv" alt="Console Output after a Config Reload" src="res/Admin_Config_Reload.png"></a></div>
<p style="padding-bottom:0px;"><br>The following configuration options are updated when using this command:</p>
<p><table style="padding-left:50px;"><tr>
<td colspan="3" align="center"><b>&lt;&lt; global options &gt;&gt;</b><td>
</tr><tr>
<td class="pages">password <b>(<font color="red">*</font>)</b></td>
<td class="pages">publicserver</td>
<td>maxbitrate</td>
</tr><tr>
<td class="pages">maxuser</td>
<td class="pages">ypport</td>
<td>ypaddr</td>
</tr><tr>
<td class="pages">yptimeout</td>
<td class="pages">destip</td>
<td>hidestats</td>
</tr><tr>
<td class="pages">redirecturl</td>
<td class="pages">riponly</td>
<td>autodumptime</td>
</tr><tr>
<td class="pages">namelookups</td>
<td class="pages">requirestreamconfigs</td>
<td class="pages">autoauthhash</td>
</tr><tr>
<td>relayreconnecttime</td>
<td>relayconnectretries</td>
<td></td>
</tr><tr>
<td colspan="3" align="center"><br><b>&lt;&lt; stream specific options &gt;&gt;</b><td>
</tr><tr>
<td class="pages">streampassword <b>(<font color="red">*</font>)</b></td>
<td class="pages">streamadminpassword <b>(<font color="red">#</font>)</b></td>
<td>streamallowrelay</td>
</tr><tr>
<td class="pages">streamauthhash</td>
<td class="pages">streamautodumptime</td>
<td>streamautodumpusers</td>
</tr><tr>
<td class="pages">streambackupfile</td>
<td class="pages">streambackupurl</td>
<td>streambanfile</td>
</tr><tr>
<td class="pages">streamid</td>
<td class="pages">streamintrofile</td>
<td>streamlistenertime</td>
</tr><tr>
<td class="pages">streammaxbitrate</td>
<td class="pages">streammaxuser</td>
<td>streampath</td>
</tr><tr>
<td class="pages">streamallowpublicrelay</td>
<td class="pages">streampublicserver</td>
<td>streamrelayurl</td>
</tr><tr>
<td class="pages">streamripfile</td>
<td class="pages">streamriponly</td>
<td>streamsonghistory</td>
</tr><tr>
<td class="pages">streamredirecturl</td>
<td class="pages">streamhidestats</td>
<td class="pages">streammovedurl</td>
<td></td>
</tr><tr>
<td colspan="3"><br>all of the debugging configuration options (see section 4.3 for all options)</td>
</tr></table></p>
<p><b>(<font color="red">*</font>)</b> This will depend upon the current values versus the new configuration values<br>
<b>(<font color="red">#</font>)</b> The master 'adminpassword' can only be changed after a restart of the server</p>
<p><br></p>


<a name="XML_/_JSON_/_JSON-P_Responses"></a><h2>5.2.&nbsp;XML / JSON / JSON-P Responses <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>As detailed in the previous sections, some of the administration actions will provide the
information in an XML / JSON / JSON-P response. For information on what is returned in
the XML responses see <a href="DNAS_Server_XML_Responses.html">Server XML Responses</a> and for JSON / JSON-P responses see
<a href="DNAS_Server_JSON_Responses.html">Server JSON Responses</a>.</p>
<p><br></p>

<a name="Stream_Addresses"></a><h2>6.&nbsp;Stream Addresses <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>Clients connecting to the streams provided by the DNAS server are able to so in a number of ways depending upon how the streams have been configured and also depending upon the number of streams you have available.</p>
<p>The main ways for a client to connect to a stream are as follows:</p>
<p style="padding-left:25px;"><b>&lt;serverurl&gt;/stream/&lt;streamid&gt;/</b><br>
or<br>
<b>&lt;serverurl&gt;/</b> (if using default values for streamid = 1)<br>
or<br>
<b>&lt;serverurl&gt;/&lt;streampath&gt;</b></p>
<p>&lt;serverurl&gt; is typically formed as http://destip:portbase (see sections 4.2 and 4.8)<br>
&lt;streamid&gt; is the 'streamid' set from the stream configuration (see section 4.12)<br>
&lt;streampath&gt; is the 'streampath' set from the stream configuration (see section 4.12)</p>
<p><br>If the client attempting to connect to the server instance does not specify &lt;streampath&gt; or &lt;streamid&gt; in the stream url it attempts to access or if only one stream is provided then the server will usually default to the first stream it knows about and will allow the client to make a valid connection (though this is not guaranteed to happen).</p>
<p style="margin-bottom:0px;"><br>This handling of the stream addresses provided is something to keep in mind especially if you are providing multiple streams as this will allow you to provide different addresses for certain clients to be able to use a specific stream<br>
e.g.</p>
<p style="padding-left:25px;margin-top:0px;">if you wanted to have mobile clients connect to a lower bandwidth stream then you could direct them to '<b>&lt;serverurl/mobile&gt;</b>'</p>
<p><br>The server options available for controlling how the stream's path is specified can be seen in section 4.12 which also details the equivalent values needing to be set in the Transcoder configuration if you use Transcoder to provide a source to the DNAS server.</p>
<p><br></p>

<a name="HTTP_Protocol_Compatibility"></a><h2>6.1.&nbsp;HTTP Protocol Compatibility <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>Although the ICY protocol (used for client connections) is very similar to the HTTP protocol, most browsers and some client software will have issues with playing SHOUTcast streams such as in their HTML5 based players with most modern browsers. As a way to improve player capatibility with these browsers and clients, appending '<b>icy=http</b>' to the stream address will make the DNAS server generate a HTTP header instead of an ICY header response e.g. <b>HTTP/1.0 200 OK</b> instead of <b>ICY 200 OK</b> (which is for a successful connect).</p>
<p><br>The following examples show how to use this mode with the examples from <a href="">section 6.0</a>:</p>
<p style="padding-left:25px;"><b>&lt;serverurl&gt;/stream/&lt;streamid&gt;/?icy=http</b><br>
or<br>
<b>&lt;serverurl&gt;/?icy=http</b><br>
or<br>
<b>&lt;serverurl&gt;/&lt;streampath&gt;?icy=http</b><br><br></p>
<pre>If 'icy=http' is not specified, the DNAS server will generate a header
response based on the 'disableicy' configuration option (see <a href="#Networking">section 4.8</a>).</pre>
<p><br></p>

<a name="Maximum_Client_Connection_Limits"></a><h2>7.&nbsp;Maximum Client Connection Limits <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>In general, there are inherent limits on the maximum number of client connections which may be made to a running instances of the DNAS server which can be set by configuration limits e.g. 'maxuser', Operating System limits or bandwidth limits being reached.</p>
<p>The first two are easy to resolve whereas the last (bandwidth limits) is something which will usually require obtaining additional hosting or paying for more available bandwidth.</p>
<p>If reaching the Operating System limit, this is usually indicated by the maximum number of clients never going above a fixed value even if there is the bandwidth and the server has been configured to go higher. This usually appears as around 330 maximum concurrent client connections (though this can vary a bit).</p>
<p>If using a non-Windows Operating System then you can use the 'ulimit -n xxxx' command to change the upper limit from what is already set which can be found from just 'ulimit -n' e.g. to change the limit to 4096 connections you would run <b>ulimit -n 4096</b></p>
<p>If using a Windows Operating System then there isn't any real way to change such things due to the OS hopefully being configured with limits that will not be reached when using the DNAS server. If in doubt then consult the Microsoft support documentation for the OS.</p>
<p><br></p>

<a name="Example_Configurations"></a><h2>8.&nbsp;Example Configurations <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>Include as part of the DNAS server installation are a number of example configurations to get started with if you prefer to do things directly instead of using the setup / builder modes (<a href="#Run_in_Setup_or_Builder_Mode">section 3.4</a>). The provided examples as found in the examples folder are:</p>
<p style="padding-left:25px;">sc_serv_basic.conf<br>
sc_serv_public.conf<br>
sc_serv_relay.conf<br>
sc_serv_simple.conf</p>
<p><br>All of the configuration examples are documented and will relate back to details in this document appropriately. You will need to change some details e.g. passwords in these example files for the setup you are making (see <a href="#Getting_Started">section 3.0</a>). All of the examples are designed to work from the same install folder as the DNAS server once they have been copied into the root of the install folder (where sc_serv[.exe] is).</p>
<p><br>Remember if you are not happy with editing text files or find it still too confusing then
you can use the '<b>setup</b>' or '<b>configuration builder</b>' modes (see <a href="#Run_in_Setup_or_Builder_Mode">section 3.4</a>).</p>
<p><br></p>

<a name="sc_serv_basic"></a><h2>sc_serv_basic <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>This is the base configuration from which the other configuration examples are based and this will get a DNAS server instance running as a local setup with no connection made to the Directory to list the stream.</p>
<p><br></p>

<a name="sc_serv_public"></a><h2>8.1.&nbsp;sc_serv_public <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>This configuration file changes the required options in the sc_serv_basic configuration to get a DNAS server instance running as a public setup with a connection made to the Directory for listing the stream. This shows the use of the 'include' option (see section 4.7) and how specifying a configuration option twice uses the last value found.</p>
<p><br></p>

<a name="sc_serv_relay"></a><h2>8.2.&nbsp;sc_serv_relay <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>This configuration file changes the required options in the sc_serv_public configuration to get a DNAS server instance running as a public setup with a source coming in from a relay server instead of via a direct source connection (as used in the other examples).</p>
<p><br></p>

<a name="sc_serv_debug"></a><h2>8.3.&nbsp;sc_serv_debug <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<p>This configuration file can be included in any other configuration files to allow you to get debug logging output when trying to investigate any issues you may be experiencing.</p>
<p><br></p>

<a name="sc_serv_simple"></a><h2>8.4.&nbsp;sc_serv_simple <a style="font-size:55%;" href="#">[top]</a></h2>
<hr>
<br><pre>Use this if you just need to get a very basic server running or are impatient or
are struggling to get it running despite the previous example configurations.</pre>
<p>This configuration file is designed to be used just as is and is the simplest form of the configuration file you can have which will allow you to get a running server to appear on the YP. This works by using the default settings of the DNAS server though does change some of the file paths inorder to fit in with the existing setup as used by the other examples.</p>
<p><br></p>